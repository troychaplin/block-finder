(()=>{var e={321:()=>{document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("block-finder-form");function t(e,t){const n=document.createElement("div");n.className="autocomplete-wrapper",n.style.position="relative",e.parentNode.insertBefore(n,e),e.style.display="none",n.appendChild(e);const o=Array.from(e.options).filter(e=>""!==e.value),s=document.createElement("input");s.type="text",s.className="autocomplete-input",s.placeholder=t||"Type to search...",s.setAttribute("autocomplete","off"),n.appendChild(s);const a=document.createElement("ul");a.className="autocomplete-dropdown",n.appendChild(a);let l=-1,r=[];function c(){const e=s.value.toLowerCase().trim();if(a.innerHTML="",r=e?o.filter(t=>t.textContent.toLowerCase().includes(e)):o,0===r.length&&e){const e=document.createElement("li");return e.className="autocomplete-item no-results",e.textContent="No results found",a.appendChild(e),a.classList.add("show"),void(a.scrollTop=0)}r.forEach((e,t)=>{const n=document.createElement("li");n.className="autocomplete-item",n.textContent=e.textContent,n.dataset.value=e.value,n.dataset.index=t,n.addEventListener("click",()=>{i(e)}),n.addEventListener("mouseenter",()=>{l=t,d()}),a.appendChild(n)}),r.length>0?(a.classList.add("show"),l=-1,a.scrollTop=0):a.classList.remove("show")}function d(){const e=a.querySelectorAll(".autocomplete-item:not(.no-results)");e.forEach((e,t)=>{t===l?e.classList.add("highlighted"):e.classList.remove("highlighted")}),l>=0&&e[l]&&e[l].scrollIntoView({block:"nearest"})}function i(t){e.value=t.value,s.value=t.textContent,a.classList.remove("show"),l=-1,e.dispatchEvent(new Event("change",{bubbles:!0}))}if(s.addEventListener("input",()=>{c()}),s.addEventListener("focus",()=>{c()}),s.addEventListener("keydown",e=>{const t=a.querySelectorAll(".autocomplete-item:not(.no-results)");"ArrowDown"===e.key?(e.preventDefault(),l<t.length-1&&(l++,d())):"ArrowUp"===e.key?(e.preventDefault(),l>0?(l--,d()):0===l&&(l=-1,d())):"Enter"===e.key?(e.preventDefault(),l>=0&&t[l]?i(r[l]):1===r.length&&i(r[0])):"Escape"===e.key&&(a.classList.remove("show"),l=-1)}),document.addEventListener("click",e=>{n.contains(e.target)||(a.classList.remove("show"),l=-1)}),e.value){const t=e.options[e.selectedIndex];t&&t.value&&(s.value=t.textContent)}s.addEventListener("blur",()=>{setTimeout(()=>{if(e.value){const t=e.options[e.selectedIndex];t&&t.value&&!s.value&&(s.value=t.textContent)}else s.value="";a.classList.remove("show")},200)})}const n=document.getElementById("post-type-selector"),o=document.getElementById("block-finder-selector");n&&t(n,"Search post types..."),o&&t(o,"Search blocks..."),e.addEventListener("submit",async t=>{if(t.preventDefault(),!n||!o)return;const s=n.value,a=o.value,l=document.getElementById("block-finder-results"),r=e.querySelector('button[type="submit"]');if(r.disabled=!0,r.textContent="Finding blocks...",l.innerHTML='<p id="block-results-loading">Loading results...</p>',""===s||""===a)return l.innerHTML="<p>Please select both a post type and a block to find.</p>",r.disabled=!1,void(r.textContent="Find Block");const c=new URLSearchParams;c.append("action","find_blocks"),c.append("post_type",s),c.append("block",a),c.append("nonce",blockFinderAjax.nonce);try{const e=await fetch(blockFinderAjax.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:c.toString()});if(e.ok){const t=await e.text();l.innerHTML=t}else{const t=await e.json();l.innerHTML=`<p>An error occurred: ${t.message}</p>`}}catch(e){l.innerHTML=`<p>An error occurred: ${e.message}</p>`}finally{r.disabled=!1,r.textContent="Find Block"}})})}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(321)})()})();