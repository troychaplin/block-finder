(()=>{var e={547:()=>{document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("block-finder-form");if(!e)return;function t(e,t){const n=document.createElement("div");n.className="autocomplete-wrapper",n.style.position="relative",e.parentNode?.insertBefore(n,e),e.style.display="none",n.appendChild(e);const o=Array.from(e.options).filter(e=>""!==e.value),s=document.createElement("input");s.type="text",s.className="autocomplete-input",s.placeholder=t||"Type to search...",s.setAttribute("autocomplete","off"),n.appendChild(s);const l=document.createElement("ul");l.className="autocomplete-dropdown",n.appendChild(l);let r=-1,a=[];function c(){const e=s.value.toLowerCase().trim();if(l.innerHTML="",a=e?o.filter(t=>(t.textContent||"").toLowerCase().includes(e)):o,0===a.length&&e){const e=document.createElement("li");return e.className="autocomplete-item no-results",e.textContent="No results found",l.appendChild(e),l.classList.add("show"),void(l.scrollTop=0)}a.forEach((e,t)=>{const n=document.createElement("li");n.className="autocomplete-item",n.textContent=e.textContent,n.dataset.value=e.value,n.dataset.index=t.toString(),n.addEventListener("click",()=>{d(e)}),n.addEventListener("mouseenter",()=>{r=t,i()}),l.appendChild(n)}),a.length>0?(l.classList.add("show"),r=-1,l.scrollTop=0):l.classList.remove("show")}function i(){const e=l.querySelectorAll(".autocomplete-item:not(.no-results)");e.forEach((e,t)=>{t===r?e.classList.add("highlighted"):e.classList.remove("highlighted")}),r>=0&&e[r]&&e[r].scrollIntoView({block:"nearest"})}function d(t){e.value=t.value,s.value=t.textContent||"",l.classList.remove("show"),r=-1,e.dispatchEvent(new Event("change",{bubbles:!0}))}if(s.addEventListener("input",()=>{c()}),s.addEventListener("focus",()=>{c()}),s.addEventListener("keydown",e=>{const t=l.querySelectorAll(".autocomplete-item:not(.no-results)");"ArrowDown"===e.key?(e.preventDefault(),r<t.length-1&&(r++,i())):"ArrowUp"===e.key?(e.preventDefault(),r>0?(r--,i()):0===r&&(r=-1,i())):"Enter"===e.key?(e.preventDefault(),r>=0&&t[r]?d(a[r]):1===a.length&&d(a[0])):"Escape"===e.key&&(l.classList.remove("show"),r=-1)}),document.addEventListener("click",e=>{n.contains(e.target)||(l.classList.remove("show"),r=-1)}),e.value){const t=e.options[e.selectedIndex];t&&t.value&&(s.value=t.textContent||"")}s.addEventListener("blur",()=>{setTimeout(()=>{if(e.value){const t=e.options[e.selectedIndex];t&&t.value&&!s.value&&(s.value=t.textContent||"")}else s.value="";l.classList.remove("show")},200)})}const n=document.getElementById("post-type-selector"),o=document.getElementById("block-finder-selector");n&&t(n,"Search post types..."),o&&t(o,"Search blocks...");let s="all";async function l(t=1,r="all"){if(!n||!o)return;const a=n.value,c=o.value,i=document.getElementById("block-finder-results");if(!i)return;if(""===a&&""===c)return void(i.innerHTML='<div class="block-finder-empty-state"><p>Select a post type and block to search.</p></div>');if(""===a)return void(i.innerHTML='<div class="block-finder-empty-state"><p>Please select a post type.</p></div>');if(""===c)return void(i.innerHTML='<div class="block-finder-empty-state"><p>Please select a block to find.</p></div>');const d=e?.querySelector('button[type="submit"]');if(!e||!d)return;s=r,d.disabled=!0,d.textContent="Searching...",i.innerHTML=`\n\t\t\t<div class="block-finder-loading">\n\t\t\t\t<div class="skeleton-header"></div>\n\t\t\t\t<ul class="skeleton-list">${Array(5).fill("").map(()=>'<li class="skeleton-item"><span class="skeleton-text"></span><span class="skeleton-actions"></span></li>').join("")}</ul>\n\t\t\t</div>\n\t\t`;const u=new URLSearchParams;u.append("action","find_blocks"),u.append("post_type",a),u.append("block",c),u.append("page",t.toString()),u.append("filter",r),u.append("nonce",blockFinderAjax.nonce);try{const e=await fetch(blockFinderAjax.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:u.toString()});if(e.ok){const t=await e.text();i.innerHTML=t,function(){const e=document.getElementById("block-finder-results");if(!e)return;const t=e.querySelector(".block-finder-prev"),n=e.querySelector(".block-finder-next");t&&t.addEventListener("click",()=>{l(parseInt(t.dataset.page||"1",10),s)}),n&&n.addEventListener("click",()=>{l(parseInt(n.dataset.page||"1",10),s)})}(),function(){const e=document.getElementById("block-finder-results");if(!e)return;e.querySelectorAll(".block-finder-filter-btn").forEach(e=>{e.addEventListener("click",()=>{l(1,e.dataset.filter||"all")})})}()}else{const t=await e.json();i.innerHTML=`<p>An error occurred: ${t.message}</p>`}}catch(e){const t=e instanceof Error?e.message:"Unknown error";i.innerHTML=`<p>An error occurred: ${t}</p>`}finally{d.disabled=!1,d.textContent="Find Block"}}e.addEventListener("submit",async e=>{s="all",e.preventDefault(),l(1)})})}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(547)})()})();