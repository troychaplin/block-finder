(()=>{var e={321:()=>{document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("block-finder-form");function t(e,t){const n=document.createElement("div");n.className="autocomplete-wrapper",n.style.position="relative",e.parentNode.insertBefore(n,e),e.style.display="none",n.appendChild(e);const o=Array.from(e.options).filter(e=>""!==e.value),s=document.createElement("input");s.type="text",s.className="autocomplete-input",s.placeholder=t||"Type to search...",s.setAttribute("autocomplete","off"),n.appendChild(s);const l=document.createElement("ul");l.className="autocomplete-dropdown",n.appendChild(l);let a=-1,r=[];function c(){const e=s.value.toLowerCase().trim();if(l.innerHTML="",r=e?o.filter(t=>t.textContent.toLowerCase().includes(e)):o,0===r.length&&e){const e=document.createElement("li");return e.className="autocomplete-item no-results",e.textContent="No results found",l.appendChild(e),l.classList.add("show"),void(l.scrollTop=0)}r.forEach((e,t)=>{const n=document.createElement("li");n.className="autocomplete-item",n.textContent=e.textContent,n.dataset.value=e.value,n.dataset.index=t,n.addEventListener("click",()=>{d(e)}),n.addEventListener("mouseenter",()=>{a=t,i()}),l.appendChild(n)}),r.length>0?(l.classList.add("show"),a=-1,l.scrollTop=0):l.classList.remove("show")}function i(){const e=l.querySelectorAll(".autocomplete-item:not(.no-results)");e.forEach((e,t)=>{t===a?e.classList.add("highlighted"):e.classList.remove("highlighted")}),a>=0&&e[a]&&e[a].scrollIntoView({block:"nearest"})}function d(t){e.value=t.value,s.value=t.textContent,l.classList.remove("show"),a=-1,e.dispatchEvent(new Event("change",{bubbles:!0}))}if(s.addEventListener("input",()=>{c()}),s.addEventListener("focus",()=>{c()}),s.addEventListener("keydown",e=>{const t=l.querySelectorAll(".autocomplete-item:not(.no-results)");"ArrowDown"===e.key?(e.preventDefault(),a<t.length-1&&(a++,i())):"ArrowUp"===e.key?(e.preventDefault(),a>0?(a--,i()):0===a&&(a=-1,i())):"Enter"===e.key?(e.preventDefault(),a>=0&&t[a]?d(r[a]):1===r.length&&d(r[0])):"Escape"===e.key&&(l.classList.remove("show"),a=-1)}),document.addEventListener("click",e=>{n.contains(e.target)||(l.classList.remove("show"),a=-1)}),e.value){const t=e.options[e.selectedIndex];t&&t.value&&(s.value=t.textContent)}s.addEventListener("blur",()=>{setTimeout(()=>{if(e.value){const t=e.options[e.selectedIndex];t&&t.value&&!s.value&&(s.value=t.textContent)}else s.value="";l.classList.remove("show")},200)})}const n=document.getElementById("post-type-selector"),o=document.getElementById("block-finder-selector");async function s(t=1){if(!n||!o)return;const l=n.value,a=o.value,r=document.getElementById("block-finder-results");if(""===l&&""===a)return void(r.innerHTML='<div class="block-finder-empty-state"><p>Select a post type and block to search.</p></div>');if(""===l)return void(r.innerHTML='<div class="block-finder-empty-state"><p>Please select a post type.</p></div>');if(""===a)return void(r.innerHTML='<div class="block-finder-empty-state"><p>Please select a block to find.</p></div>');const c=e.querySelector('button[type="submit"]');c.disabled=!0,c.textContent="Searching...",r.innerHTML=`\n\t\t\t<div class="block-finder-loading">\n\t\t\t\t<div class="skeleton-header"></div>\n\t\t\t\t<ul class="skeleton-list">${Array(5).fill("").map(()=>'<li class="skeleton-item"><span class="skeleton-text"></span><span class="skeleton-actions"></span></li>').join("")}</ul>\n\t\t\t</div>\n\t\t`;const i=new URLSearchParams;i.append("action","find_blocks"),i.append("post_type",l),i.append("block",a),i.append("page",t.toString()),i.append("nonce",blockFinderAjax.nonce);try{const e=await fetch(blockFinderAjax.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:i.toString()});if(e.ok){const t=await e.text();r.innerHTML=t,function(){const e=document.getElementById("block-finder-results"),t=e.querySelector(".block-finder-prev"),n=e.querySelector(".block-finder-next");t&&t.addEventListener("click",()=>{s(parseInt(t.dataset.page,10))}),n&&n.addEventListener("click",()=>{s(parseInt(n.dataset.page,10))})}(),function(){const e=document.getElementById("block-finder-results").querySelectorAll(".block-finder-filter");0!==e.length&&e.forEach(t=>{t.addEventListener("click",()=>{var n;e.forEach(e=>e.classList.remove("active")),t.classList.add("active"),n=t.dataset.filter,document.getElementById("block-finder-results").querySelectorAll(".block-finder-list li").forEach(e=>{const t="1"===e.dataset.hasRoot,o="1"===e.dataset.hasNested,s=e.querySelector(".block-finder-context");"all"===n?(e.style.display="",s&&(s.style.display="")):"root"===n?(e.style.display=t?"":"none",s&&(s.style.display="none")):"nested"===n&&(e.style.display=o?"":"none",s&&(s.style.display=""))})})})}()}else{const t=await e.json();r.innerHTML=`<p>An error occurred: ${t.message}</p>`}}catch(e){r.innerHTML=`<p>An error occurred: ${e.message}</p>`}finally{c.disabled=!1,c.textContent="Find Block"}}n&&t(n,"Search post types..."),o&&t(o,"Search blocks..."),e.addEventListener("submit",async e=>{e.preventDefault(),s(1)})})}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(321)})()})();